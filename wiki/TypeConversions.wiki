#summary Description of type conversion rules between Lua and ActionScript.

= Introduction =

*TODO:* Cleanup

There are eight types in Lua:

Simple ones:

  * nil
  * number
  * string
  * boolean

Harder ones:

  * table
  * function
  * thread
  * userdata

Note that threads in Lua are not OS threads, but coroutines --
collaborative multithreading constructs. We probably do not need to
allow Lua threads and userdata to be pass to AS (except maybe as a
"black boxes" to be passed back to Lua functions). We may implement
some AS3 types as userdata (class objects for example) -- but it would
be easy to distinguish between "our" userdata and one that come, say,
from another Lua C module.

We probably would not be able to map table to AS3 well (due to its
advanced features like metatables etc). For the sake of Lua to AS
calls it could be easier to provide explicit convertors to each of
relevant AS types

Lua: {{{ AS3.table2{object,array,vector,dictionary,bytearray}() }}}

It is probably best to avoid autoconversions here. OTOH conversion
from the relevant AS type to table should go smoothly (but maybe it
would be simple to use metatabled userdata instead, need to prototype
a bit here). 

*TODO* We should decide also if bytearray actually fits here --
probably not.

= !ActionScript -> Lua =

Primitive types:

   * Boolean -> boolean
   * int  -> number
   * Null -> nil
   * Number -> number
   * String -> string
   * uint -> number
   * void -> nil

Complex types:

Note that userdata "type" (metatable) should be different for each
case, as there are things you can do with each type.

   * Object -> userdata, convertible to table
   * Array -> userdata, convertible to table
   * Vector -> userdata, convertible to table
   * Dictionary -> userdata, convertible to table
   * ByteArray -> userdata, convertible to table and to string
   * Function -> userdata with __call metamethod (as3.new("Function")(args))

   * Error -> ???

   * MovieClip, Bitmap, Shape, TextField, SimpleButton, Date, RegExp,
Video, XML, XMLList -> the same kind of userdata as for any other
"user-supplied" AS3 class.

= Lua -> !ActionScript =

*TODO*